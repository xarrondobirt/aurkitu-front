<ion-header>
  <ion-toolbar color="dark">
    <ion-title>Test Aurkitu Files</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <ion-item class="ion-margin-bottom">
    <ion-label position="stacked">Token JWT (Postman)</ion-label>
    <ion-textarea [(ngModel)]="manualToken" placeholder="Pegar Bearer token..." rows="2"></ion-textarea>
  </ion-item>

  <ion-text color="primary">
    <h3>1. Foto del objeto</h3>
  </ion-text>
  <aurkitu-file-selector
    type="image"
    label="Foto de la galerÃ­a"
    (fileSelected)="onPhotoChange($event)"> </aurkitu-file-selector>

  <ion-text color="primary">
    <h3>2. Prueba documental</h3>
  </ion-text>
  <aurkitu-file-selector
    type="document"
    label="Adjuntar factura (PDF)"
    (fileSelected)="onDocumentChange($event)"> </aurkitu-file-selector>

  <div class="ion-margin-top">

    @if (selectedPhoto) {
      <p class="file-info">
        <ion-icon name="image-outline" color="primary"></ion-icon>
        <strong>Foto:</strong> {{ selectedPhoto.name }}
        <small>({{ (selectedPhoto.size/1024).toFixed(1) }} KB)</small>
      </p>
    }

    @if (selectedDocument) {
      <p class="file-info">
        <ion-icon name="document-text-outline" color="secondary"></ion-icon>
        <strong>Doc:</strong> {{ selectedDocument.name }}
        <small>({{ (selectedDocument.size/1024).toFixed(1) }} KB)</small>
      </p>
    }

    <ion-button expand="block" (click)="enviarDatos()" [disabled]="isSubmitting || !manualToken">

      @if (isSubmitting) {
        <ion-spinner name="crescent"></ion-spinner>
      }
      @else {
        <span>Enviar al Backend</span>
      }

    </ion-button>

  </div>

</ion-content>
